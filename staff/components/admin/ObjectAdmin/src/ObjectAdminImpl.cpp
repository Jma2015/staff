// This file generated by staff_codegen
// For more information please visit: http://code.google.com/p/staff/
// Service Implementation

#include <staff/security/Objects.h>
#include "ObjectAdminImpl.h"

namespace staff
{
namespace admin
{
  ::staff::admin::SObject& operator<<(::staff::admin::SObject& rstObject, const staff::security::SObject& rstSecObject)
  {
    rstObject.nId = rstSecObject.nId;
    rstObject.nParentId = rstSecObject.nParentId;
    rstObject.sName = rstSecObject.sName;
    rstObject.sDescription = rstSecObject.sDescription;

    return rstObject;
  }

CObjectAdminImpl::CObjectAdminImpl()
{
}

CObjectAdminImpl::~CObjectAdminImpl()
{
}

::staff::admin::SObject CObjectAdminImpl::GetById(int nId)
{
  ::staff::admin::SObject tResult;
  staff::security::SObject stObject;
  staff::security::CObjects::Inst().GetById(nId, stObject);

  return tResult << stObject;  // result
}

::staff::admin::SObject CObjectAdminImpl::GetByPathName(const std::string& sPathName)
{
  ::staff::admin::SObject tResult;
  staff::security::SObject stObject;
  staff::security::CObjects::Inst().GetByPathName(sPathName, stObject);

  return tResult << stObject;  // result
}

::staff::admin::TObjectList CObjectAdminImpl::GetChilds(int nId)
{
  ::staff::admin::TObjectList tResult;

  ::staff::admin::SObject tObjTmp;

  staff::security::TObjectList lsObjects;
  staff::security::CObjects::Inst().GetChilds(nId, lsObjects);

  for (staff::security::TObjectList::const_iterator itObject = lsObjects.begin();
       itObject != lsObjects.end(); ++itObject)
  {
    tObjTmp << *itObject;
    tResult.push_back(tObjTmp);
  }

  return tResult;  // result
}

int CObjectAdminImpl::Add(const ::staff::admin::SObject& rstObject)
{
  int tResult = -1;

  staff::security::CObjects::Inst().Add(rstObject.sName, rstObject.sDescription, rstObject.nParentId, tResult);

  return tResult;  // result
}

void CObjectAdminImpl::Remove(int nObjectId)
{
  staff::security::CObjects::Inst().Remove(nObjectId);
}

void CObjectAdminImpl::SetDescription(int nObjectId, const std::string& sDescription)
{
  staff::security::CObjects::Inst().SetDescription(nObjectId, sDescription);
}


}
}

